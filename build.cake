//////////////////////////////////////////////////////////////////////
// ARGUMENTS
//////////////////////////////////////////////////////////////////////

var configuration = Argument("configuration", "Debug");
var target = Argument("target", "Default");

//////////////////////////////////////////////////////////////////////
// PREPARATION
//////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////
// TASKS
//////////////////////////////////////////////////////////////////////

Task("Nuget-Package")
    .Does(() =>
{
	NuGetPack("./Microsoft.Lync2013SDK.nuspec", new NuGetPackSettings{});	
});

Task("Nuget-Publish")
    .IsDependentOn("Nuget-Package")
    .Does(() =>
{
	var package = dir "Microsoft.Lync2013SDK*.nupkg";
	
	NuGetPush(package, new NuGetPushSettings {
		Source = "https://api.nuget.org/v3/index.json",
		ApiKey = "oy2iak5atkjdmdibq3caplvy3ihr4a3udkdypopl2jel7m"
	});
});

//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("NuGet-Publish");

//////////////////////////////////////////////////////////////////////
// EXECUTION
//////////////////////////////////////////////////////////////////////

RunTarget(target);
